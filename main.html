<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Hypercare Dashboard</title>

    <!-- Bootstrap CSS --><link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- NEW: Bootstrap Icons (for the back arrow in the modal) --><link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <!-- Google Font: Poppins --><link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <!-- Custom CSS (Copied from other files + new styles) --><style>
      /* --- BASE STYLES --- */
      body {
        font-family: "Poppins", sans-serif;
        /* Use your new base color */
        background-color: #f4f6ff;
      } /* <-- FIXED: Added missing } */

      /* NEW: Blurred background for modals */
      .modal-open {
        /* This class is added by Bootstrap when a modal is open */
        overflow: hidden;
      }
      .modal-backdrop-blur {
        backdrop-filter: blur(15px);
        background-color: rgba(0, 0, 0, 0.3);
        /* THIS IS THE FIX! 
          We must override Bootstrap's default opacity of 0.5,
          which washes out the backdrop-filter.
        */
        opacity: 1;
        transition: backdrop-filter 0.15s linear;
      }

      /* --- COLORS --- */
      .bg-dark-custom {
        background-color: #1c1c3a;
      }

      .text-primary-custom {
        color: #4a43d1;
      }

      /* --- BUTTON STYLES (for reusing) --- */
      .btn-primary-custom {
        background-color: #6a60e9;
        border-color: #6a60e9;
      }
      .btn-primary-custom:hover {
        /* A slightly darker hover state */
        background-color: #584fc9;
        border-color: #584fc9;
      }
      .btn-outline-primary-custom {
        border-color: #6a60e9;
        color: #6a60e9;
      }
      .btn-outline-primary-custom:hover {
        background-color: #6a60e9;
        border-color: #6a60e9;
        color: #ffffff;
      }

      /* --- NEW: Custom white button for modals --- */
      .btn-light-custom {
        background-color: #ffffff;
        color: #1c1c3a; /* Dark text */
        border-color: #ffffff;
        padding-top: 0.75rem;
        padding-bottom: 0.75rem;
      }
      .btn-light-custom:hover {
        background-color: #f0f0f0;
        border-color: #f0f0f0;
        color: #1c1c3a;
      }

      /* --- NEW: 6-TILE STYLES --- */
      .app-tile {
        background: #ffffff;
        border-radius: 1rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.07);
        /* Set a fixed size for the tile */
        width: 120px;
        height: 120px;
        /* Use flexbox to center the image inside the tile */
        display: flex;
        align-items: center;
        justify-content: center;
        /* Center the tile itself horizontally */
        margin: 0 auto;
      }

      .app-tile:hover {
        /* Add a subtle hover effect */
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        transform: translateY(-2px);
      }

      /* --- NEW: MEDICATION CARD STYLES --- */
      .med-card {
        background: #ffffff;
        /* Use a larger border-radius to match the design */
        border-radius: 1rem;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.07);
        padding: 1rem;
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
      }

      .med-img-container {
        /* Use the same purple as our primary button */
        background-color: #6a60e9;
        border-radius: 0.75rem;
        padding: 0.5rem;
        margin-right: 1rem;
        /* Stop the container from shrinking */
        flex-shrink: 0;
      }

      .med-img-container img {
        /* Control the size of the medicine box image */
        max-width: 60px;
        display: block;
      }

      /* --- CUSTOM MODAL STYLES (Updated for fixed size) --- */
      .modal-fullscreen-custom {
        background-color: #1c1c3a;
        color: #ffffff;
        /* Ensure the modal content itself is flexible to push footer down */
        display: flex;
        flex-direction: column;
        border-radius: 1rem; /* Rounded corners for the card */
      }
      .modal-fullscreen-custom .modal-header {
        border-bottom: none;
        padding: 2rem 1.5rem; /* Adjust padding for fixed size */
        position: relative; /* For the back button absolute positioning */
      }
      .modal-fullscreen-custom .modal-body {
        /* Use flex to push button to bottom */
        display: flex;
        flex-direction: column;
        padding: 1rem 1.5rem; /* Adjust padding for fixed size */
        flex-grow: 1; /* Allow body to grow and push footer */
        overflow-y: auto; /* Allow content to scroll if it's too long */
      }
      .modal-fullscreen-custom .modal-footer {
        border-top: none;
        padding: 1.5rem;
        flex-shrink: 0; /* Prevent footer from shrinking */
      }
      /* Custom back button */
      .btn-back {
        color: #ffffff;
        font-size: 2rem;
        line-height: 1;
        opacity: 0.8;
        background: none;
        border: none;
        padding: 0;
        cursor: pointer;
        position: absolute; /* Absolute positioning for the back arrow */
        left: 1.5rem;
        top: 50%;
        transform: translateY(-50%);
      }
      .btn-back:hover {
        color: #ffffff;
        opacity: 1;
      }

      /* NEW: Custom modal dialog size */
      .modal-dialog-custom-size {
        /* Set explicit width and height */
        width: 720px; /* As requested */
        height: 80vh; /* CHANGED: Use 80% of viewport height */
        max-width: none; /* Override Bootstrap's max-width for dialogs */
        /* REMOVED margin: 1.75rem auto; to allow centering */
        pointer-events: all; /* Ensure clicks inside the modal work */
      }

      /* Adjust for smaller screens if the custom size is too big */
      @media (max-width: 768px) {
        .modal-dialog-custom-size {
          width: 95%; /* Make it responsive on smaller screens */
          /* REMOVED height: 90vh; (it's now the default) */
        }
        .modal-fullscreen-custom .modal-body {
          font-size: 0.9rem; /* Smaller font for small screens */
        }
        .modal-fullscreen-custom h1 {
          font-size: 2rem !important; /* Adjust heading size */
        }
        .modal-fullscreen-custom h2 {
          font-size: 1.75rem !important; /* Adjust heading size */
        }
      }

      /* --- NEW: Blood Pressure Modal Styles --- */
      .form-control-light-custom {
        /* Custom WHITE display box */
        background-color: #ffffff;
        border: none;
        color: #1c1c3a; /* Dark text inside */
        padding: 1.25rem 1rem;
        border-radius: 1rem;
        font-size: 1.25rem;
        font-weight: bold;
      }
      /* FIXED: Removed empty ruleset */

      /* --- NEW: Daily Activity Modal Styles --- */
      .activity-row {
        background-color: #f4f6ff; /* Lightest purple background */
        border-radius: 50rem; /* Pill shape */
        padding: 0.5rem 0.5rem 0.5rem 1.5rem; /* Add padding */
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
      }
      .activity-row p {
        margin: 0;
        color: #1c1c3a; /* Dark text */
        font-weight: bold;
      }

      /* --- NEW: Pharmacy Notes Fact Card --- */
      .fact-card {
        background-color: #ffffff;
        color: #1c1c3a; /* Dark text */
        border-radius: 1rem;
        padding: 1.25rem;
        margin-bottom: 1rem;
      }
      .fact-card p {
        margin: 0;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <!-- ===== HEADER (Dark) ===== --><header class="bg-dark-custom p-3 shadow-sm text-light">
      <div class="container">
        <div class="d-flex align-items-center">
          <!-- Profile Picture Placeholder --><div
            class="rounded-circle bg-light me-3"
            style="width: 50px; height: 50px"
          >
            <!-- You can replace this div with an <img> tag for a real profile pic --></div>
          <!-- Welcome Text --><div>
            <div class="small">Welcome!</div>
            <div class="fw-bold fs-5">John Doe</div>
          </div>
        </div>
      </div>
    </header>

    <!-- ===== MAIN CONTENT (White) ===== --><main class="container my-4">
      <!-- --- 6-TILE GRID --- --><div class="row g-4 text-center mb-4">
        <!-- Tile 1: Daily Monitoring --><div class="col-4 text-center">
          <a
            href="#"
            class="text-decoration-none app-tile"
            data-bs-toggle="modal"
            data-bs-target="#dailyMonitoringModal"
          >
            <img
              src="assets/daily_monitoring.png"
              alt="Daily Monitoring"
              class="img-fluid"
              style="max-width: 80px"
            />
          </a>
          <p class="fw-bold text-dark mt-2" style="font-size: 0.8rem">
            Daily Monitoring
          </p>
        </div>
        <!-- Tile 2: Blood Pressure --><div class="col-4 text-center">
          <a
            href="#"
            class="text-decoration-none app-tile"
            data-bs-toggle="modal"
            data-bs-target="#bpmModal"
          >
            <img
              src="assets/bpm.png"
              alt="Blood Pressure"
              class="img-fluid"
              style="max-width: 80px"
            />
          </a>
          <p class="fw-bold text-dark mt-2" style="font-size: 0.8rem">
            Blood Pressure
          </p>
        </div>
        <!-- Tile 3: Medication Interaction --><div class="col-4 text-center">
          <a
            href="#"
            class="text-decoration-none app-tile"
            data-bs-toggle="modal"
            data-bs-target="#medInteractionModal"
          >
            <img
              src="assets/medication_interaction.png"
              alt="Medication Interaction"
              class="img-fluid"
              style="max-width: 80px"
            />
          </a>
          <p class="fw-bold text-dark mt-2" style="font-size: 0.8rem">
            Medication Interaction
          </p>
        </div>
        <!-- Tile 4: Pharmacy Notes --><div class="col-4 text-center">
          <a
            href="#"
            class="text-decoration-none app-tile"
            data-bs-toggle="modal"
            data-bs-target="#pharmacyNotesModal"
          >
            <img
              src="assets/pharmacy_notes.png"
              alt="Pharmacy Notes"
              class="img-fluid"
              style="max-width: 80px"
            />
          </a>
          <p class="fw-bold text-dark mt-2" style="font-size: 0.8rem">
            Pharmacy Notes
          </p>
        </div>
        <!-- Tile 5: Edupharma --><div class="col-4 text-center">
          <a
            href="#"
            class="text-decoration-none app-tile"
            data-bs-toggle="modal"
            data-bs-target="#edupharmaModal"
          >
            <img
              src="assets/edupharma.png"
              alt="Edupharma"
              class="img-fluid"
              style="max-width: 80px"
            />
          </a>
          <p class="fw-bold text-dark mt-2" style="font-size: 0.8rem">
            Edupharma
          </p>
        </div>
        <!-- Tile 6: Health Dashboard --><div class="col-4 text-center">
          <a
            href="#"
            class="text-decoration-none app-tile"
            data-bs-toggle="modal"
            data-bs-target="#healthDashboardModal"
          >
            <img
              src="assets/health_dashboard.png"
              alt="Health Dashboard"
              class="img-fluid"
              style="max-width: 80px"
            />
          </a>
          <p class="fw-bold text-dark mt-2" style="font-size: 0.8rem">
            Health Dashboard
          </p>
        </div>
      </div>

      <!-- --- MEDICATION LIST --- --><h2 class="my-4 fw-bold" style="color: #1c1c3a">Your Medication</h2>

      <!-- Medication Card 1 --><div class="med-card">
        <div class="med-img-container">
          <img src="assets/amlodipine.png" alt="Amlodipine" />
        </div>
        <div>
          <h5 class="fw-bold mb-0" style="color: #1c1c3a">
            Amlodipine 10 Mg
          </h5>
          <p class="text-muted mb-0" style="font-size: 0.9rem">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit.
          </p>
        </div>
      </div>

      <!-- Medication Card 2 --><div class="med-card">
        <div class="med-img-container">
          <img src="assets/amlodipine.png" alt="Amlodipine" />
        </div>
        <div>
          <h5 class="fw-bold mb-0" style="color: #1c1c3a">
            Amlodipine 10 Mg
          </h5>
          <p class="text-muted mb-0" style="font-size: 0.9rem">
            Vestibulum porttitor ultrices elementum.
          </p>
        </div>
      </div>

      <!-- Medication Card 3 --><div class="med-card">
        <div class="med-img-container">
          <img src="assets/amlodipine.png" alt="Amlodipine" />
        </div>
        <div>
          <h5 class="fw-bold mb-0" style="color: #1c1c3a">
            Amlodipine 10 Mg
          </h5>
          <p class="text-muted mb-0" style="font-size: 0.9rem">
            Proin in felis non erat blandit.
          </p>
        </div>
      </div>
    </main>

    <!--
    ==================================================================
    MODALS (Pop-ups)
    ==================================================================
    --><!-- MODAL 1: Daily Monitoring (Styled like your example) --><div
      class="modal fade"
      id="dailyMonitoringModal"
      tabindex="-1"
      aria-labelledby="dailyMonitoringModalLabel"
      aria-hidden="true"
      data-bs-backdrop-class="modal-backdrop-blur"
    >
      <!-- ADDED custom size class, REMOVED modal-fullscreen --><div class="modal-dialog modal-dialog-centered modal-dialog-custom-size">
        <div class="modal-content modal-fullscreen-custom">
          <!-- Modal Header (Back Button) --><div class="modal-header" id="dailyMonitoring_backButton">
            <button
              type="button"
              class="btn-back"
              data-bs-dismiss="modal"
              aria-label="Close"
            >
              <i class="bi bi-arrow-left fw-bold"></i>
            </button>
          </div>

          <!-- Modal Body (Content) --><div class="modal-body">
            <!-- Wrapper for all initial content -->
            <div id="dailyMonitoring_initialView">
              <!-- Flex container for layout -->
              <div class="d-flex flex-column h-100">
                <!-- Centered Text -->
                <div class="text-center">
                  <h1 class="fw-bold display-5 mb-4">
                    Medication Schedule
                  </h1>
                  <h2 class="fw-bold display-6">10:15 A.M Every Day</h2>
                </div>

                <!-- Top Left Text -->
                <p class="fs-5 mt-5 pt-3">
                  Each medication helps<br />maintain your blood pressure!
                </p>

                <!-- Bottom Right Text -->
                <p class="fs-5 mt-auto text-end text-white-50">
                  Don't forget to take the<br />medication at the same<br />time
                  everyday!
                </p>
              </div>
            </div>

            <!-- Success View (Hidden by default) -->
            <div
              class="d-none text-center"
              id="dailyMonitoring_successView"
            >
              <!-- This helper div vertically centers the content -->
              <div
                class="d-flex flex-column justify-content-center align-items-center h-100"
              >
                <img
                  src="assets/check.png"
                  alt="Success"
                  class="img-fluid mb-4"
                  style="max-width: 100px"
                />
                <h2 class="fw-bold fs-1">
                  Keep it up, don't forget to take the medication
                  consistently!
                </h2>
              </div>
            </div>
          </div>

          <!-- Modal Footer (Buttons) --><div class="modal-footer">
            <!-- Initial Button -->
            <button
              type="button"
              class="btn btn-light-custom rounded-pill fw-bold btn-lg w-100 shadow"
              id="dailyMonitoring_initialButton"
              onclick="showSuccess('dailyMonitoring')"
            >
              I Have Taken The Medicine
            </button>
            <!-- Close Button (Hidden by default) -->
            <button
              type="button"
              class="btn btn-light-custom rounded-pill fw-bold btn-lg w-100 shadow d-none"
              id="dailyMonitoring_closeButton"
              data-bs-dismiss="modal"
            >
              Done
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- End Modal 1 --><!-- MODAL 2: Blood Pressure --><div
      class="modal fade"
      id="bpmModal"
      tabindex="-1"
      aria-labelledby="bpmModalLabel"
      aria-hidden="true"
      data-bs-backdrop-class="modal-backdrop-blur"
    >
      <div class="modal-dialog modal-dialog-centered modal-dialog-custom-size">
        <div class="modal-content modal-fullscreen-custom">
          <div class="modal-header">
            <button
              type="button"
              class="btn-back"
              data-bs-dismiss="modal"
              aria-label="Close"
            >
              <i class="bi bi-arrow-left fw-bold"></i>
            </button>
          </div>
          <div class="modal-body">
            <h1 class="fw-bold display-5 mb-4">Your Blood Pressure</h1>

            <!-- Sistolic -->
            <div class="mb-3">
              <label class="form-label fw-bold mb-2"
                >Sistolic (mmHg)</label
              >
              <!-- Data will come from DB, '120' is a placeholder -->
              <div class="form-control-light-custom" id="bpm_sistolic_display">
                120
              </div>
            </div>

            <!-- Diastolic -->
            <div class="mb-4">
              <label class="form-label fw-bold mb-2"
                >Diastolic (mmHg)</label
              >
              <!-- Data will come from DB, '80' is a placeholder -->
              <div class="form-control-light-custom" id="bpm_diastolic_display">
                80
              </div>
            </div>

            <!-- Notes -->
            <!-- This text will be set by JavaScript -->
            <p class="fs-5 mt-4" id="bpm_notes">
              Notes: Calculating...
            </p>

            <div class="mt-auto"></div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-light-custom rounded-pill fw-bold btn-lg w-100 shadow"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- End Modal 2 --><!-- MODAL 3: Medication Interaction --><div
      class="modal fade"
      id="medInteractionModal"
      tabindex="-1"
      aria-labelledby="medInteractionModalLabel"
      aria-hidden="true"
      data-bs-backdrop-class="modal-backdrop-blur"
    >
      <div class="modal-dialog modal-dialog-centered modal-dialog-custom-size">
        <div class="modal-content modal-fullscreen-custom">
          <div class="modal-header">
            <button
              type="button"
              class="btn-back"
              data-bs-dismiss="modal"
              aria-label="Close"
            >
              <i class="bi bi-arrow-left fw-bold"></i>
            </button>
          </div>
          <div class="modal-body">
            <h1 class="fw-bold display-5 mb-4">Medication Interaction</h1>
            <p class="fs-5">Placeholder content for Medication Interaction.</p>
            <div class="mt-auto"></div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-light-custom rounded-pill fw-bold btn-lg w-100 shadow"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- End Modal 3 --><!-- MODAL 4: Pharmacy Notes --><div
      class="modal fade"
      id="pharmacyNotesModal"
      tabindex="-1"
      aria-labelledby="pharmacyNotesModalLabel"
      aria-hidden="true"
      data-bs-backdrop-class="modal-backdrop-blur"
    >
      <div class="modal-dialog modal-dialog-centered modal-dialog-custom-size">
        <div class="modal-content modal-fullscreen-custom">
          <div class="modal-header">
            <button
              type="button"
              class="btn-back"
              data-bs-dismiss="modal"
              aria-label="Close"
            >
              <i class="bi bi-arrow-left fw-bold"></i>
            </button>
          </div>
          <!-- UPDATED: Modal Body -->
          <div class="modal-body">
            <h1 class="fw-bold display-5 mb-4">Did you know?</h1>

            <!-- Fact Card List -->
            <div class="fact-card">
              <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed
                condimentum et tortor at fringilla.
              </p>
            </div>
            <div class="fact-card">
              <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed
                condimentum et tortor at fringilla.
              </p>
            </div>
            <div class="fact-card">
              <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed
                condimentum et tortor at fringilla.
              </p>
            </div>
            <div class="fact-card">
              <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed
                condimentum et tortor at fringilla.
              </p>
            </div>
            <div class="fact-card">
              <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed
                condimentum et tortor at fringilla.
              </p>
            </div>
            <!-- End Fact Card List -->

            <div class="mt-auto"></div>
          </div>
          <!-- UPDATED: Modal Footer -->
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-light-custom rounded-pill fw-bold btn-lg w-100 shadow"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- End Modal 4 --><!-- MODAL 5: Edupharma --><div
      class="modal fade"
      id="edupharmaModal"
      tabindex="-1"
      aria-labelledby="edupharmaModalLabel"
      aria-hidden="true"
      data-bs-backdrop-class="modal-backdrop-blur"
    >
      <div class="modal-dialog modal-dialog-centered modal-dialog-custom-size">
        <div class="modal-content modal-fullscreen-custom">
          <div class="modal-header">
            <button
              type="button"
              class="btn-back"
              data-bs-dismiss="modal"
              aria-label="Close"
            >
              <i class="bi bi-arrow-left fw-bold"></i>
            </button>
          </div>
          <div class="modal-body">
            <h1 class="fw-bold display-5 mb-4">Edupharma</h1>
            <p class="fs-5">Placeholder content for Edupharma.</p>
            <div class="mt-auto"></div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-light-custom rounded-pill fw-bold btn-lg w-100 shadow"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- End Modal 5 --><!-- MODAL 6: Health Dashboard --><div
      class="modal fade"
      id="healthDashboardModal"
      tabindex="-1"
      aria-labelledby="healthDashboardModalLabel"
      aria-hidden="true"
      data-bs-backdrop-class="modal-backdrop-blur"
    >
      <div class="modal-dialog modal-dialog-centered modal-dialog-custom-size">
        <div class="modal-content modal-fullscreen-custom">
          <div class="modal-header">
            <button
              type="button"
              class="btn-back"
              data-bs-dismiss="modal"
              aria-label="Close"
            >
              <i class="bi bi-arrow-left fw-bold"></i>
            </button>
          </div>
          <div class="modal-body">
            <h1 class="fw-bold display-5 mb-4">Daily Activity Check</h1>

            <!-- Activity List -->
            <div class="activity-row">
              <p>Take Medicine</p>
              <button
                class="btn btn-primary-custom rounded-pill fw-bold"
                onclick="toggleActivity(this)"
              >
                Done
              </button>
            </div>
            <div class="activity-row">
              <p>Exercise</p>
              <button
                class="btn btn-primary-custom rounded-pill fw-bold"
                onclick="toggleActivity(this)"
              >
                Done
              </button>
            </div>
            <div class="activity-row">
              <p>Reduce Salt</p>
              <button
                class="btn btn-primary-custom rounded-pill fw-bold"
                onclick="toggleActivity(this)"
              >
                Done
              </button>
            </div>
            <div class="activity-row">
              <p>Sleep Enough</p>
              <button
                class="btn btn-outline-primary-custom rounded-pill fw-bold"
                onclick="toggleActivity(this)"
              >
                Undone
              </button>
            </div>
            <div class="activity-row">
              <p>No Smoking</p>
              <button
                class="btn btn-outline-primary-custom rounded-pill fw-bold"
                onclick="toggleActivity(this)"
              >
                Undone
              </button>
            </div>

            <div class="mt-auto"></div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-light-custom rounded-pill fw-bold btn-lg w-100 shadow"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <!-- End Modal 6 --><!-- Bootstrap JS Bundle --><script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      xintegrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- NEW: JavaScript for Modals -->
    <script>
      // This function swaps the views
      function showSuccess(modalPrefix) {
        // Get the elements
        const initialView = document.getElementById(modalPrefix + "_initialView");
        const successView = document.getElementById(modalPrefix + "_successView");
        const backButton = document.getElementById(modalPrefix + "_backButton");
        const initialButton = document.getElementById(
          modalPrefix + "_initialButton"
        );
        const closeButton = document.getElementById(modalPrefix + "_closeButton");

        // Hide the initial view
        initialView.classList.add("d-none");
        backButton.classList.add("d-none");
        initialButton.classList.add("d-none");

        // Show the success view
        successView.classList.remove("d-none");
        closeButton.classList.remove("d-none");
      }

      // NEW: Function to toggle the activity buttons
      function toggleActivity(button) {
        if (button.classList.contains("btn-outline-primary-custom")) {
          // It's "Undone" -> Make it "Done"
          button.classList.remove("btn-outline-primary-custom");
          button.classList.add("btn-primary-custom");
          button.textContent = "Done";
        } else {
          // FIXED: It's "Done" -> Make it "Undone"
          button.classList.remove("btn-primary-custom");
          button.classList.add("btn-outline-primary-custom");
          button.textContent = "Undone";
        }
      }

      // --- This part resets the modal when it's closed ---
      const dailyModal = document.getElementById("dailyMonitoringModal");
      dailyModal.addEventListener("hidden.bs.modal", function (event) {
        // Get the elements
        const initialView = document.getElementById(
          "dailyMonitoring_initialView"
        );
        const successView = document.getElementById(
          "dailyMonitoring_successView"
        );
        const backButton = document.getElementById("dailyMonitoring_backButton");
        const initialButton = document.getElementById(
          "dailyMonitoring_initialButton"
        );
        const closeButton = document.getElementById(
          "dailyMonitoring_closeButton"
        );

        // Show the initial view (reset)
        initialView.classList.remove("d-none");
        backButton.classList.remove("d-none");
        initialButton.classList.remove("d-none");

        // Hide the success view (reset)
        successView.classList.add("d-none");
        closeButton.classList.add("d-none");
      });

      // --- NEW: This part runs the BPM logic when it opens ---
      const bpmModal = document.getElementById("bpmModal");
      bpmModal.addEventListener("shown.bs.modal", function (event) {
        // 1. Get the values (we'll read the text from the placeholder divs)
        // In a real app, you would fetch this from your DB
        const sistolicEl = document.getElementById("bpm_sistolic_display");
        const diastolicEl = document.getElementById("bpm_diastolic_display");
        const notesEl = document.getElementById("bpm_notes");

        // Convert text to numbers
        const sistolic = parseInt(sistolicEl.textContent);
        const diastolic = parseInt(diastolicEl.textContent);

        // 2. Check the logic
        let note = "Notes: ";
        if (
          (sistolic === 120 && diastolic === 80) ||
          (sistolic === 110 && diastolic === 80) ||
          (sistolic === 130 && diastolic === 70)
        ) {
          note += "Your blood pressure is Normal.";
        } else if (
          sistolic > 130 ||
          diastolic > 80 ||
          (sistolic > 120 && diastolic > 70)
        ) {
          note +=
            "Your blood pressure is High. Try to rest and reduce salt consumption.";
        } else {
          note += "Your blood pressure is Low. Please consult your doctor.";
        }

        // 3. Set the notes text
        notesEl.textContent = note;
      });
    </script>
  </body>
</html>
